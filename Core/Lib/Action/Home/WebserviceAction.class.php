<?phpclass WebserviceAction extends Action{		//评论某个展品	public function comment($id){			}	/*	 获取某个展会参展的所有公司参展商	 用 get方法传入展会id	 条用例子	 http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibitorsofExhibition/id/1	*/	public function getExhibitorsofExhibition($id){  		$Dao=D('Admin/ExhibitorsofExhibitionView');		$where['exhibition_id']=$id;		$list=$Dao->where($where)->group('user_id')->order('id ASC')->select();		$this->ajaxReturn($list,"查询成功！",1);	}		//获取某个公司 在某个展会中的所有产品或者参展品	/*		传入展会id和展商id		调用例子		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibitsofExhibitor/exhibition/1/exhibitor/1	*/	public function getExhibitsofExhibitor(){		$Dao=D('Admin/ExhibitsofExhibitorView');		$exhibition_id=$_GET['exhibition'];		$exhibitor_id=$_GET['exhibitor'];		$where['exhibitor_id']=$exhibitor_id;		$where['exhibition_id']=$exhibition_id;		$list=$Dao->where($where)->group('exhibit_id')->select();		$count=$Dao->where($where)->count(); //总数		$this->ajaxReturn($list,"查询成功！",1);	}		/*获取某个展会 的所有参展品	  调用例子	  http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibitsofExhibition/id/1	*/	public function getExhibitsofExhibition($id){		$Dao=D('Admin/ExhibitsofExhibitionView');		$where['exhibition_id']=$id;		$count=$Dao->where($where)->count(); //总数		$list=$Dao->where($where)->group('exhibit_id')->order('id ASC')->select();		$this->ajaxReturn($list,"查询成功！",1);	}			/**		展会列表查询 		分页 10条一页		传入参数p 页码		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibitions	*/	public function getExhibitions(){		$ExhibitionDAO = D('Exhibition');		$nowPage = isset($_GET['p'])?$_GET['p']:1;		$map=array();		$map['status']=1; //查询状态为开启的 所有 展览		//$map['is_verified']=2;    //已经通过审核的可见		$list = $ExhibitionDAO->field('id,name_cn,name_en,logo_url,is_on_show,address,hall,period_start,period_end,day_start,day_end')->where($map)->order('id ASC')->page($nowPage.',10')->select();		$count=$ExhibitionDAO->where($map)->count();//总数		$this->ajaxReturn($list,"查询成功！",1);	}		/**		展会详细信息查询		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibition/id/1	*/		public function getExhibition($id){		$ExhibitionDAO = D('Exhibition');		$where['id']=intval($id);		$where['status']=1; //查询状态为开启的 所有 展览		//$where['is_verified']=1;    //已经通过审核的可见		$exhibition=$ExhibitionDAO->where($where)->find();		$this->ajaxReturn($exhibition,"查询成功！",1);	}		/**		公司参展商详细信息查询		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibitor/id/1	*/	public function getExhibitor($id){		$ExhibitorDAO = D('Exhibitor');		$where['id']=intval($id);		$where['status']=1; //查询状态为开启的 所有 展览		//$where['is_verified']=1;    //已经通过审核的可见		$Exhibitor=$ExhibitorDAO->where($where)->find();		$this->ajaxReturn($Exhibitor,"查询成功！",1);	}		/**		某个展品详细信息查询		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getExhibit/id/4	*/	public function getExhibit($id){		$ExhibitDAO = D('Exhibit');		$where['id']=intval($id);		$where['status']=1; //查询状态为开启的 所有 展览		//$where['is_verified']=1;    //已经通过审核的可见		$exhibit=$ExhibitDAO->where($where)->find();		$this->ajaxReturn($exhibit,"查询成功！",1);	}		/**		某个展品附件查询		//如果传入filetype 则会单独取类型		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getAttachmentsofExhibit/id/4	*/	public function getAttachmentsofExhibit($id){		$AttachmentDAO = D('Attachment');		$map=array();		$map['type_id']=2;  //展品类型		$map['foreign_id']=intval($id);  //附件所属的展会id		$map['status']=1; //查询状态为开启的 所有 展览		if(isset($_GET['filetype'])){  //如果有文件类型则设置			switch(intval($_GET['filetype'])){				case 1:					$map['file_type']=1; //文档				break;				case 2:					$map['file_type']=2; //图片				break;				case 3:					$map['file_type']=3; //视频				break;				case 4:					$map['file_type']=4; //其他				break;				default:								}				}		$list=$AttachmentDAO->where($map)->order('id ASC')->select();		$this->ajaxReturn($list,"查询成功！",1);	}		/**		某个展会附件查询		//如果传入filetype 则会单独取类型		http://localhost:8081/GraduationProject/index.php?s=Home/Webservice/getAttachmentsofExhibition/id/4	*/	public function getAttachmentsofExhibition($id){		$AttachmentDAO = D('Attachment');		$map=array();		$map['type_id']=1;  //展会类型		$map['foreign_id']=intval($id);  //附件所属的展会id		$map['status']=1; //查询状态为开启的 所有 展览		if(isset($filetype)){  //如果有文件类型则设置			switch(intval($filetype)){				case 1:					$map['file_type']=1;				break;				case 2:					$map['file_type']=2;				break;				case 3:					$map['file_type']=3;				break;				case 4:					$map['file_type']=4;				break;				default:								}				}		$list=$AttachmentDAO->where($map)->order('id ASC')->select();		$this->ajaxReturn($list,"查询成功！",1);	}}?>